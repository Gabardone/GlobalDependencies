{"sections":[{"estimatedTimeInMinutes":15,"xcodeRequirement":"Xcode 15","content":[{"type":"paragraph","inlineContent":[{"text":"This tutorial guides you through a sample set up for a global dependency using the ","type":"text"},{"code":"GlobalDependencies","type":"codeVoice"},{"type":"text","text":" "},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}]},{"type":"paragraph","inlineContent":[{"text":"The tutorial will also demonstrate how to name types and variables to take additional advantage of the","type":"text"},{"text":" ","type":"text"},{"text":"GlobalDependencies macros defaults.","type":"text"}]}],"kind":"hero","title":"Setting up a Global Dependency","chapter":"Setting up a Dependency"},{"kind":"tasks","tasks":[{"title":"Before You Begin","contentSection":[{"content":[{"inlineContent":[{"type":"text","text":"Declaring the API for a dependency is out of scope for this tutorial, it depends on the needs of your"},{"type":"text","text":" "},{"text":"codebase. For the sake of this tutorial we will have already some types related to clown management that we","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"plan on using to manage our app’s clown. If your app doesn’t manage a clown you’re doing it wrong."}],"type":"paragraph"}],"kind":"contentAndMedia","mediaPosition":"trailing"}],"stepsSection":[{"runtimePreview":null,"caption":[],"code":"DependencySetup-1-1-ClownManager.swift","media":null,"content":[{"type":"paragraph","inlineContent":[{"text":"First we’ll have a ","type":"text"},{"code":"ClownManager","type":"codeVoice"},{"text":" protocol which declares the API our app needs to manage its clown. To","type":"text"},{"type":"text","text":" "},{"text":"avoid confusion with other protocols required for dependency management we will call this one the","type":"text"},{"type":"text","text":" "},{"text":"“API protocol” throughout the tutorial.","type":"text"}]}],"type":"step"},{"content":[{"inlineContent":[{"text":"We also have a default implementation that wraps the clown-as-a-service API from pagliacci.io. We","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"declare it as a class but could be any type as long as it adopts "},{"code":"ClownManager","type":"codeVoice"}],"type":"paragraph"}],"caption":[],"type":"step","media":null,"code":"DependencySetup-1-2-PagliacciClownManager.swift","runtimePreview":null},{"media":null,"content":[{"inlineContent":[{"type":"text","text":"Finally as a thinly veiled conceit to demonstrate how the "},{"code":"@Dependency","type":"codeVoice"},{"text":" macro’s ","type":"text"},{"type":"codeVoice","code":"lowercased:"},{"type":"text","text":" parameter"},{"type":"text","text":" "},{"text":"works, we will also have a ","type":"text"},{"type":"codeVoice","code":"HONKDevice"},{"type":"text","text":" protocol for an additional dependency that can be reused by"},{"text":" ","type":"text"},{"text":"either clowns or geese.","type":"text"}],"type":"paragraph"}],"caption":[],"type":"step","code":"DependencySetup-1-3-HONKDevice.swift","runtimePreview":null}],"anchor":"Before-You-Begin"},{"anchor":"Implement-the-default-dependency-value-factory","contentSection":[{"mediaPosition":"trailing","kind":"contentAndMedia","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Before we declare the dependency it’s best to ready a default dependency value factory which will be wired"},{"text":" ","type":"text"},{"text":"up to generate a default value for the dependency the first time it is needed.","type":"text"}]},{"inlineContent":[{"text":"You can either extend an existing type to adopt the protocol or create a standalone type for the task.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"It is recommended to do either on the same file where the dependency is declared so it can be declared"},{"type":"text","text":" "},{"type":"codeVoice","code":"private"},{"text":" and thus avoid exposing any deatils of the default dependency value factory implementation.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"The adoption of this protocol is also often the best place to put any logic that generates a different"},{"type":"text","text":" "},{"type":"text","text":"default implementation depending on i.e. build flags or build configuration. We’ll do a sample of that"},{"text":" ","type":"text"},{"type":"text","text":"through this tutorial."}],"type":"paragraph"}]}],"stepsSection":[{"media":null,"content":[{"inlineContent":[{"type":"text","text":"You can extend an existing type to adopt "},{"type":"reference","identifier":"doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies\/DefaultDependencyValueFactory","isActive":true},{"text":". For example, addimg this to","type":"text"},{"type":"text","text":" "},{"text":"the same file where you’ll be declaring the dependency proper:","type":"text"}],"type":"paragraph"}],"type":"step","code":"DependencySetup-2-1-Extension.swift","runtimePreview":null,"caption":[]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Alternatively, you can declare a throwaway type that adopts the protocol and contains the logic.","type":"text"},{"text":" ","type":"text"},{"text":"Optionally, you can call it ","type":"text"},{"type":"codeVoice","code":"Default<API Protocol>ValueFactory"},{"type":"text","text":" which will allow you to omit the"},{"type":"text","text":" "},{"type":"codeVoice","code":"defaultValueFactory"},{"text":" parameter and use the shortened ","type":"text"},{"isActive":true,"identifier":"doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies\/Dependency(lowercased:)","type":"reference"},{"type":"text","text":" macro."}]}],"caption":[],"type":"step","media":null,"runtimePreview":null,"code":"DependencySetup-2-2-Thunk.swift"},{"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"text":"As a final option, if you prefer to package the default value factory implementation away from the","type":"text"},{"type":"text","text":" "},{"type":"text","text":"dependency declaration, you can just typealias a type with the expected name so you can use the"},{"text":" ","type":"text"},{"type":"text","text":"shortened "},{"identifier":"doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies\/Dependency(lowercased:)","type":"reference","isActive":true},{"type":"text","text":" macro."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Assume that the code of the first step of this section is elsewhere but accessible from"},{"text":" ","type":"text"},{"code":"ClownManager.swift","type":"codeVoice"},{"type":"text","text":"."}]}],"code":"DependencySetup-2-3-Typealias.swift","type":"step","media":null}],"title":"Implement the default dependency value factory"},{"anchor":"Attach-the-Dependency-macro-to-the-API-protocol","contentSection":[{"kind":"contentAndMedia","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"With the default dependency value factory in place, the next step is just to attach the "},{"type":"codeVoice","code":"@Dependency"},{"type":"text","text":" "},{"type":"text","text":"macro to the API protocol."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"We will now different use cases and how to use the macro’s parameters to deal with them."}]}],"mediaPosition":"trailing"}],"stepsSection":[{"media":null,"caption":[{"inlineContent":[{"type":"text","text":"Applying the macro will generate a dependency protocol and dependency key based on the attachee"},{"text":" ","type":"text"},{"text":"API protocol.","type":"text"}],"type":"paragraph"}],"content":[{"inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"defaultValueFactory"},{"text":" parameter is used to point the macro to the implementation of the protocol","type":"text"},{"type":"text","text":" "},{"type":"text","text":"that will produce the default value when requested."}],"type":"paragraph"}],"runtimePreview":null,"type":"step","code":"DependencySetup-3-1-ClownManagerCustomFactory.swift"},{"code":"DependencySetup-3-2-ClownManagerAllDefaults.swift","caption":[],"runtimePreview":null,"content":[{"inlineContent":[{"text":"If you have a type named with the pattern ","type":"text"},{"type":"codeVoice","code":"Default<API Protocol>ValueFactory"},{"type":"text","text":" you can omit the"},{"type":"text","text":" "},{"type":"codeVoice","code":"defaultValueFactory"},{"text":" parameter from the macro and it will automatically catch on it. Here you can see","type":"text"},{"type":"text","text":" "},{"text":"the expanded version of such a use case","type":"text"}],"type":"paragraph"}],"type":"step","media":null},{"content":[{"inlineContent":[{"text":"Finally if your API protocol type starts with an all caps acronym you can adjust the macro behavior so","type":"text"},{"type":"text","text":" "},{"type":"text","text":"all the generated types will respect Swift naming conventions using the "},{"type":"codeVoice","code":"lowercased"},{"type":"text","text":" parameter."}],"type":"paragraph"}],"caption":[],"code":"DependencySetup-3-3-HONKDeviceLowercased.swift","runtimePreview":null,"media":null,"type":"step"}],"title":"Attach the @Dependency macro to the API protocol"},{"title":"Potatoes!","anchor":"Potatoes","contentSection":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Now that all the auxiliary types are defined, we have to add our dependency to ","type":"text"},{"code":"GlobalDependencies","type":"codeVoice"},{"text":" so it","type":"text"},{"type":"text","text":" "},{"text":"will be injectable and overridable. Due to the limitations of Swift macros (as of Swift 5.9) there’s a bit","type":"text"},{"type":"text","text":" "},{"text":"more code to write.","type":"text"}]}],"kind":"contentAndMedia","mediaPosition":"trailing"}],"stepsSection":[{"media":null,"code":"DependencySetup-4-1-GlobalDependencyExtension.swift","content":[{"inlineContent":[{"type":"text","text":"You will need to declare an extension to "},{"type":"codeVoice","code":"GlobalDependencies"},{"type":"text","text":" with the same access as your API Protocol."},{"type":"text","text":" "},{"text":"That extension will adopt ","type":"text"},{"code":"<API protocol>.Dependency","type":"codeVoice"},{"type":"text","text":". Its whole implementation can be taken care of by"},{"type":"text","text":" "},{"text":"the ","type":"text"},{"code":"#GlobalDependency","type":"codeVoice"},{"type":"text","text":" macro, with the API protocol as its parameter."}],"type":"paragraph"}],"type":"step","runtimePreview":null,"caption":[]},{"type":"step","content":[{"inlineContent":[{"text":"The macro will expand into an implementation of the dependency protocol which accounts for potential","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"overrides."}],"type":"paragraph"}],"code":"DependencySetup-4-2-GlobalDependencyExtensionExpanded.swift","caption":[],"media":null,"runtimePreview":null}]}]},{"kind":"callToAction","abstract":[{"text":"Once you have your dependencies set up, you’ll want to inject them into your codebase’s components. The","type":"text"},{"text":" ","type":"text"},{"text":"GlobalDependencies package makes it straightforward while ensuring your component’s dependencies are well","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"managed and well understood."}],"title":"Injecting Dependencies","featuredEyebrow":"Tutorial","action":{"isActive":true,"overridingTitleInlineContent":[{"text":"Get started","type":"text"}],"type":"reference","overridingTitle":"Get started","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection"}}],"hierarchy":{"modules":[{"reference":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Setting-up-a-Dependency","projects":[{"sections":[{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Before-You-Begin","kind":"task"},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Implement-the-default-dependency-value-factory","kind":"task"},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Attach-the-Dependency-macro-to-the-API-protocol","kind":"task"},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Potatoes","kind":"task"}],"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup"}]},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Injecting-Dependencies","projects":[{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection","sections":[{"kind":"task","reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Attach-the-InjectedDependencies-Macro-to-Your-Component"},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Adjust-Access-Control-of-Your-Dependencies-If-Needed","kind":"task"},{"kind":"task","reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Inject-your-dependencies-on-initialization"}]}]},{"projects":[{"sections":[{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride#Set-up-a-Mock-Dependency-Implementation","kind":"task"},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride#Build-a-GlobalDependencies-Value-With-Your-Overrides","kind":"task"}],"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride"}],"reference":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Overriding-Dependencies"}],"paths":[["doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies","doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/$volume","doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Setting-up-a-Dependency"],["doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies"]],"reference":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies"},"variants":[{"paths":["\/tutorials\/globaldependencies\/dependencysetup"],"traits":[{"interfaceLanguage":"swift"}]}],"metadata":{"categoryPathComponent":"Using-GlobalDependencies","category":"Using GlobalDependencies","title":"Setting up a Global Dependency","role":"project"},"identifier":{"url":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup","interfaceLanguage":"swift"},"schemaVersion":{"patch":0,"minor":3,"major":0},"kind":"project","references":{"DependencySetup-1-3-HONKDevice.swift":{"content":["protocol HONKDevice {","    func honk(times: Int)","","    func hooooooonk()","}"],"fileName":"HONKDevice.swift","type":"file","highlights":[],"fileType":"swift","syntax":"swift","identifier":"DependencySetup-1-3-HONKDevice.swift"},"doc://GlobalDependencies/tutorials/Using-GlobalDependencies/Injecting-Dependencies":{"title":"Injecting Dependencies","identifier":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Injecting-Dependencies","type":"topic","url":"\/tutorials\/using-globaldependencies\/injecting-dependencies","kind":"article","abstract":[],"role":"article"},"DependencySetup-3-2-ClownManagerAllDefaults.swift":{"content":["@Dependency","protocol ClownManager {","    func honk()","","    func slap(victim: Person)","","    func pieToFace(pie: Pie, victim: Person)","","    var shoeSize: Double { get set }","","    \/\/ And more...","","    \/\/ Generated by the @Dependency macro","","    typealias Dependency = ClownManagerDependency","","    typealias DependencyKey = ClownManagerDependencyKey","}","","\/\/ Generated by the @Dependency macro","","protocol ClownManagerDependency: Dependencies {","    var clownManager: any ClownManager { get }","}","","struct ClownManagerDependencyKey: DependencyKey {","    static let defaultValue: any ClownManager = DefaultClownManagerValueFactory.makeDefaultValue()","}","","\/\/ Default Dependency Value Factory","","private struct DefaultClownManagerValueFactory: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}"],"fileName":"ClownManager.swift","type":"file","highlights":[{"line":1},{"line":27},{"line":32}],"fileType":"swift","syntax":"swift","identifier":"DependencySetup-3-2-ClownManagerAllDefaults.swift"},"doc://GlobalDependencies/tutorials/Using-GlobalDependencies/Overriding-Dependencies":{"title":"Overriding Dependencies","identifier":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Overriding-Dependencies","type":"topic","url":"\/tutorials\/using-globaldependencies\/overriding-dependencies","kind":"article","abstract":[],"role":"article"},"doc://GlobalDependencies/tutorials/Using-GlobalDependencies":{"kind":"overview","role":"overview","url":"\/tutorials\/using-globaldependencies","title":"Using GlobalDependencies","abstract":[{"type":"text","text":"The GlobalDependencies package helps abstract away global dependencies, inject them into components and"},{"text":" ","type":"text"},{"text":"override them for test mocking purposes. The following tutorials detail how to perform each of those tasks.","type":"text"}],"type":"topic","identifier":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies"},"DependencySetup-2-1-Extension.swift":{"syntax":"swift","fileType":"swift","identifier":"DependencySetup-2-1-Extension.swift","fileName":"ClownManager.swift","content":["private extension PagliacciClownManager: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}"],"type":"file","highlights":[]},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencySetup#Implement-the-default-dependency-value-factory":{"title":"Implement the default dependency value factory","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Implement-the-default-dependency-value-factory","type":"section","url":"\/tutorials\/globaldependencies\/dependencysetup#Implement-the-default-dependency-value-factory","kind":"section","abstract":[{"text":"This tutorial guides you through a sample set up for a global dependency using the ","type":"text"},{"type":"codeVoice","code":"GlobalDependencies"},{"text":" ","type":"text"},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}],"role":"pseudoSymbol"},"DependencySetup-4-2-GlobalDependencyExtensionExpanded.swift":{"content":["@Dependency","protocol ClownManager {","    func honk()","","    func slap(victim: Person)","","    func pieToFace(pie: Pie, victim: Person)","","    var shoeSize: Double { get set }","","    \/\/ And more...","}","","\/\/ Default Dependency Value Factory","","private struct DefaultClownManagerValueFactory: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}","","\/\/ GlobalDependencies Integration","","extension GlobalDependencies: ClownManager.Dependency {","    \/\/ Generated by the #GlobalDependency macro","","    var clownManager: any ClownManager {","        resolveDependencyFor(key: ClownManager.DependencyKey.self)","    }","}"],"fileName":"ClownManager.swift","type":"file","highlights":[{"line":29},{"line":30},{"line":31},{"line":32},{"line":33}],"fileType":"swift","syntax":"swift","identifier":"DependencySetup-4-2-GlobalDependencyExtensionExpanded.swift"},"DependencySetup-3-1-ClownManagerCustomFactory.swift":{"content":["@Dependency(defaultValueFactory: PagliacciClownManager)","protocol ClownManager {","    func honk()","","    func slap(victim: Person)","","    func pieToFace(pie: Pie, victim: Person)","","    var shoeSize: Double { get set }","","    \/\/ And more...","","    \/\/ Generated by the @Dependency macro","","    typealias Dependency = ClownManagerDependency","","    typealias DependencyKey = ClownManagerDependencyKey","}","","\/\/ Generated by the @Dependency macro","","protocol ClownManagerDependency: Dependencies {","    var clownManager: any ClownManager { get }","}","","struct ClownManagerDependencyKey: DependencyKey {","    static let defaultValue: any ClownManager = PagliacciClownManager.makeDefaultValue()","}","","\/\/ Default Dependency Value Factory","","private extension PagliacciClownManager: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}"],"fileName":"ClownManager.swift","type":"file","highlights":[],"fileType":"swift","syntax":"swift","identifier":"DependencySetup-3-1-ClownManagerCustomFactory.swift"},"DependencySetup-2-2-Thunk.swift":{"syntax":"swift","fileType":"swift","identifier":"DependencySetup-2-2-Thunk.swift","fileName":"ClownManager.swift","content":["private struct DefaultClownManagerValueFactory: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}"],"type":"file","highlights":[{"line":1}]},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyOverride#Build-a-GlobalDependencies-Value-With-Your-Overrides":{"title":"Build a `GlobalDependencies` Value With Your Overrides","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride#Build-a-GlobalDependencies-Value-With-Your-Overrides","type":"section","url":"\/tutorials\/globaldependencies\/dependencyoverride#Build-a-GlobalDependencies-Value-With-Your-Overrides","kind":"section","abstract":[{"text":"One of the most important reasons to use dependency injection is to make your software components testable by","type":"text"},{"type":"text","text":" "},{"text":"taking control of the dependencies’ side effects during testing. Any dependencies you manage through","type":"text"},{"type":"text","text":" "},{"text":"GlobalDependencies are simple to override during tests with the provided API.","type":"text"}],"role":"pseudoSymbol"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyInjection#Attach-the-InjectedDependencies-Macro-to-Your-Component":{"title":"Attach the InjectedDependencies Macro to Your Component","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Attach-the-InjectedDependencies-Macro-to-Your-Component","type":"section","url":"\/tutorials\/globaldependencies\/dependencyinjection#Attach-the-InjectedDependencies-Macro-to-Your-Component","kind":"section","abstract":[{"text":"Once you have your dependencies set up, you’ll want to inject them into your codebase’s components. The","type":"text"},{"type":"text","text":" "},{"text":"GlobalDependencies package makes it straightforward while ensuring your component’s dependencies are well","type":"text"},{"type":"text","text":" "},{"text":"managed and well understood.","type":"text"}],"role":"pseudoSymbol"},"DependencySetup-1-1-ClownManager.swift":{"content":["protocol ClownManager {","    func honk()","","    func slap(victim: Person)","","    func pieToFace(pie: Pie, victim: Person)","","    var shoeSize: Double { get set }","","    \/\/ And more...","}"],"fileName":"ClownManager.swift","type":"file","highlights":[],"fileType":"swift","syntax":"swift","identifier":"DependencySetup-1-1-ClownManager.swift"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyOverride#Set-up-a-Mock-Dependency-Implementation":{"kind":"section","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride#Set-up-a-Mock-Dependency-Implementation","role":"pseudoSymbol","url":"\/tutorials\/globaldependencies\/dependencyoverride#Set-up-a-Mock-Dependency-Implementation","abstract":[{"type":"text","text":"One of the most important reasons to use dependency injection is to make your software components testable by"},{"text":" ","type":"text"},{"text":"taking control of the dependencies’ side effects during testing. Any dependencies you manage through","type":"text"},{"type":"text","text":" "},{"text":"GlobalDependencies are simple to override during tests with the provided API.","type":"text"}],"title":"Set up a Mock Dependency Implementation","type":"section"},"DependencySetup-3-3-HONKDeviceLowercased.swift":{"content":["@Dependency(lowercased: \"honkDevice\")","protocol HONKDevice {","    func honk(times: Int)","","    func hooooooonk()","","    \/\/ And more...","","    \/\/ Generated by the @Dependency macro","","    typealias Dependency = HONKDeviceDependency","","    typealias DependencyKey = HONKDeviceDependencyKey","}","","\/\/ Generated by the @Dependency macro","","protocol HONKDeviceDependency: Dependencies {","    var honkDevice: any HONKDevice { get }","}","","struct HONKDeviceDependencyKey: DependencyKey {","    static let defaultValue: any HONKDevice = DefaultHONKDeviceValueFactory.makeDefaultValue()","}","","\/\/ Default Dependency Value Factory","","private struct DefaultHONKDeviceValueFactory: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any HONKDevice {","        \/\/ Let's pretend we got this type defined somewhere…","        AirHONKDevice()","    }","}"],"fileName":"HONKDevice.swift","type":"file","highlights":[],"fileType":"swift","syntax":"swift","identifier":"DependencySetup-3-3-HONKDeviceLowercased.swift"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyInjection#Adjust-Access-Control-of-Your-Dependencies-If-Needed":{"title":"Adjust Access Control of Your Dependencies If Needed","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Adjust-Access-Control-of-Your-Dependencies-If-Needed","type":"section","url":"\/tutorials\/globaldependencies\/dependencyinjection#Adjust-Access-Control-of-Your-Dependencies-If-Needed","kind":"section","abstract":[{"text":"Once you have your dependencies set up, you’ll want to inject them into your codebase’s components. The","type":"text"},{"type":"text","text":" "},{"text":"GlobalDependencies package makes it straightforward while ensuring your component’s dependencies are well","type":"text"},{"type":"text","text":" "},{"text":"managed and well understood.","type":"text"}],"role":"pseudoSymbol"},"doc://GlobalDependencies/documentation/GlobalDependencies/DefaultDependencyValueFactory":{"role":"symbol","url":"\/documentation\/globaldependencies\/defaultdependencyvaluefactory","type":"topic","navigatorTitle":[{"text":"DefaultDependencyValueFactory","kind":"identifier"}],"kind":"symbol","identifier":"doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies\/DefaultDependencyValueFactory","title":"DefaultDependencyValueFactory","abstract":[{"type":"text","text":"A protocol adopted by types that can build the default value for a dependency."}],"fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"kind":"identifier","text":"DefaultDependencyValueFactory"}]},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyInjection#Inject-your-dependencies-on-initialization":{"identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Inject-your-dependencies-on-initialization","role":"pseudoSymbol","kind":"section","title":"Inject your dependencies on initialization","type":"section","url":"\/tutorials\/globaldependencies\/dependencyinjection#Inject-your-dependencies-on-initialization","abstract":[{"text":"Once you have your dependencies set up, you’ll want to inject them into your codebase’s components. The","type":"text"},{"type":"text","text":" "},{"text":"GlobalDependencies package makes it straightforward while ensuring your component’s dependencies are well","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"managed and well understood."}]},"Xcode 15":{"type":"xcodeRequirement","title":"Xcode 15","url":"https:\/\/developer.apple.com\/download\/","identifier":"Xcode 15"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencySetup#Attach-the-Dependency-macro-to-the-API-protocol":{"title":"Attach the @Dependency macro to the API protocol","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Attach-the-Dependency-macro-to-the-API-protocol","type":"section","url":"\/tutorials\/globaldependencies\/dependencysetup#Attach-the-Dependency-macro-to-the-API-protocol","kind":"section","abstract":[{"type":"text","text":"This tutorial guides you through a sample set up for a global dependency using the "},{"type":"codeVoice","code":"GlobalDependencies"},{"type":"text","text":" "},{"text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable.","type":"text"}],"role":"pseudoSymbol"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencySetup#Before-You-Begin":{"identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Before-You-Begin","kind":"section","role":"pseudoSymbol","url":"\/tutorials\/globaldependencies\/dependencysetup#Before-You-Begin","abstract":[{"type":"text","text":"This tutorial guides you through a sample set up for a global dependency using the "},{"code":"GlobalDependencies","type":"codeVoice"},{"text":" ","type":"text"},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}],"title":"Before You Begin","type":"section"},"doc://GlobalDependencies/documentation/GlobalDependencies/Dependency(lowercased:)":{"kind":"symbol","identifier":"doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies\/Dependency(lowercased:)","url":"\/documentation\/globaldependencies\/dependency(lowercased:)","fragments":[{"kind":"keyword","text":"macro"},{"text":" ","kind":"text"},{"text":"Dependency","kind":"identifier"},{"kind":"text","text":"("},{"kind":"externalParam","text":"lowercased"},{"text":": ","kind":"text"},{"text":"StaticString","preciseIdentifier":"s:s12StaticStringV","kind":"typeIdentifier"},{"text":"?)","kind":"text"}],"type":"topic","abstract":[{"text":"Variant of the ","type":"text"},{"type":"codeVoice","code":"Dependency"},{"text":" macro that does not take a default value factory type.","type":"text"}],"role":"symbol","title":"Dependency(lowercased:)"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencySetup#Potatoes":{"kind":"section","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Potatoes","role":"pseudoSymbol","url":"\/tutorials\/globaldependencies\/dependencysetup#Potatoes","abstract":[{"type":"text","text":"This tutorial guides you through a sample set up for a global dependency using the "},{"type":"codeVoice","code":"GlobalDependencies"},{"text":" ","type":"text"},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}],"title":"Potatoes!","type":"section"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyInjection":{"kind":"project","title":"Injecting Dependencies","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection","estimatedTime":"10min","url":"\/tutorials\/globaldependencies\/dependencyinjection","type":"topic","abstract":[{"text":"Once you have your dependencies set up, you’ll want to inject them into your codebase’s components. The","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"GlobalDependencies package makes it straightforward while ensuring your component’s dependencies are well"},{"type":"text","text":" "},{"type":"text","text":"managed and well understood."}],"role":"project"},"DependencySetup-1-2-PagliacciClownManager.swift":{"content":["import PagliacciSDK","","class PagliacciClownManager: ClownManager {","    \/\/ Pretend there's an implementation here.","}"],"fileName":"PagliacciClownManager.swift","type":"file","highlights":[],"fileType":"swift","syntax":"swift","identifier":"DependencySetup-1-2-PagliacciClownManager.swift"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencySetup":{"type":"topic","role":"project","title":"Setting up a Global Dependency","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup","abstract":[{"type":"text","text":"This tutorial guides you through a sample set up for a global dependency using the "},{"type":"codeVoice","code":"GlobalDependencies"},{"type":"text","text":" "},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}],"kind":"project","url":"\/tutorials\/globaldependencies\/dependencysetup","estimatedTime":"15min"},"doc://GlobalDependencies/tutorials/Using-GlobalDependencies/Setting-up-a-Dependency":{"title":"Setting up a Dependency","identifier":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Setting-up-a-Dependency","type":"topic","url":"\/tutorials\/using-globaldependencies\/setting-up-a-dependency","kind":"article","abstract":[],"role":"article"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyOverride":{"role":"project","title":"Overriding Dependencies","kind":"project","abstract":[{"type":"text","text":"One of the most important reasons to use dependency injection is to make your software components testable by"},{"type":"text","text":" "},{"type":"text","text":"taking control of the dependencies’ side effects during testing. Any dependencies you manage through"},{"type":"text","text":" "},{"type":"text","text":"GlobalDependencies are simple to override during tests with the provided API."}],"estimatedTime":"10min","url":"\/tutorials\/globaldependencies\/dependencyoverride","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride","type":"topic"},"DependencySetup-4-1-GlobalDependencyExtension.swift":{"content":["@Dependency","protocol ClownManager {","    func honk()","","    func slap(victim: Person)","","    func pieToFace(pie: Pie, victim: Person)","","    var shoeSize: Double { get set }","","    \/\/ And more...","}","","\/\/ Default Dependency Value Factory","","private struct DefaultClownManagerValueFactory: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}","","\/\/ GlobalDependencies Integration","","extension GlobalDependencies: ClownManager.Dependency {","    #GlobalDependency(type: ClownManager)","}"],"fileName":"ClownManager.swift","type":"file","highlights":[],"fileType":"swift","syntax":"swift","identifier":"DependencySetup-4-1-GlobalDependencyExtension.swift"},"DependencySetup-2-3-Typealias.swift":{"content":["private typealias DefaultClownManagerValueFactory = PagliacciClownManager"],"fileName":"ClownManager.swift","type":"file","highlights":[{"line":1}],"fileType":"swift","syntax":"swift","identifier":"DependencySetup-2-3-Typealias.swift"}}}