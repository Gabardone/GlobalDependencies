{"variants":[{"paths":["\/tutorials\/globaldependencies\/dependencysetup"],"traits":[{"interfaceLanguage":"swift"}]}],"metadata":{"role":"project","categoryPathComponent":"Using-GlobalDependencies","category":"Using GlobalDependencies","title":"Setting up a Global Dependency"},"hierarchy":{"reference":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies","paths":[["doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies","doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/$volume","doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Setting-up-a-Dependency"],["doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies"]],"modules":[{"projects":[{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup","sections":[{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Before-You-Begin","kind":"task"},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Implement-the-default-dependency-value-factory","kind":"task"},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Attach-the-Dependency-macro-to-the-API-protocol","kind":"task"},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Potatoes","kind":"task"}]}],"reference":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Setting-up-a-Dependency"},{"projects":[{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection","sections":[{"kind":"task","reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Attach-the-InjectedDependencies-Macro-to-Your-Component"},{"kind":"task","reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Adjust-Access-Control-of-Your-Dependencies-If-Needed"},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Inject-your-dependencies-on-initialization","kind":"task"}]}],"reference":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Injecting-Dependencies"},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Overriding-Dependencies","projects":[{"sections":[{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride#Set-up-a-Mock-Dependency-Implementation","kind":"task"},{"kind":"task","reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride#Build-a-GlobalDependencies-Value-With-Your-Overrides"}],"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride"}]}]},"sections":[{"estimatedTimeInMinutes":15,"title":"Setting up a Global Dependency","kind":"hero","xcodeRequirement":"Xcode 15","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This tutorial guides you through a sample set up for a global dependency using the "},{"type":"codeVoice","code":"GlobalDependencies"},{"text":" ","type":"text"},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}]},{"inlineContent":[{"type":"text","text":"The tutorial will also demonstrate how to name types and variables to take additional advantage of the"},{"text":" ","type":"text"},{"type":"text","text":"GlobalDependencies macros defaults."}],"type":"paragraph"}],"chapter":"Setting up a Dependency"},{"kind":"tasks","tasks":[{"stepsSection":[{"code":"DependencySetup-1-1-ClownManager.swift","content":[{"inlineContent":[{"text":"First we’ll have a ","type":"text"},{"type":"codeVoice","code":"ClownManager"},{"type":"text","text":" protocol which declares the API our app needs to manage its clown. To"},{"text":" ","type":"text"},{"text":"avoid confusion with other protocols required for dependency management we will call this one the","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"“API protocol” throughout the tutorial."}],"type":"paragraph"}],"caption":[],"media":null,"runtimePreview":null,"type":"step"},{"runtimePreview":null,"caption":[],"media":null,"code":"DependencySetup-1-2-PagliacciClownManager.swift","content":[{"type":"paragraph","inlineContent":[{"text":"We also have a default implementation that wraps the clown-as-a-service API from pagliacci.io. We","type":"text"},{"type":"text","text":" "},{"text":"declare it as a class but could be any type as long as it adopts ","type":"text"},{"type":"codeVoice","code":"ClownManager"}]}],"type":"step"},{"caption":[],"code":"DependencySetup-1-3-HONKDevice.swift","runtimePreview":null,"media":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"Finally as a thinly veiled conceit to demonstrate how the "},{"type":"codeVoice","code":"@Dependency"},{"type":"text","text":" macro’s "},{"type":"codeVoice","code":"lowercased:"},{"type":"text","text":" parameter"},{"text":" ","type":"text"},{"text":"works, we will also have a ","type":"text"},{"type":"codeVoice","code":"HONKDevice"},{"type":"text","text":" protocol for an additional dependency that can be reused by"},{"type":"text","text":" "},{"text":"either clowns or geese.","type":"text"}],"type":"paragraph"}]}],"anchor":"Before-You-Begin","contentSection":[{"kind":"contentAndMedia","mediaPosition":"trailing","content":[{"type":"paragraph","inlineContent":[{"text":"Declaring the API for a dependency is out of scope for this tutorial, it depends on the needs of your","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"codebase. For the sake of this tutorial we will have already some types related to clown management that we"},{"type":"text","text":" "},{"text":"plan on using to manage our app’s clown. If your app doesn’t manage a clown you’re doing it wrong.","type":"text"}]}]}],"title":"Before You Begin"},{"stepsSection":[{"code":"DependencySetup-2-1-Extension.swift","media":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"You can extend an existing type to adopt "},{"identifier":"doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies\/DefaultDependencyValueFactory","isActive":true,"type":"reference"},{"type":"text","text":". For example, addimg this to"},{"text":" ","type":"text"},{"type":"text","text":"the same file where you’ll be declaring the dependency proper:"}]}],"caption":[],"runtimePreview":null,"type":"step"},{"media":null,"runtimePreview":null,"type":"step","caption":[],"code":"DependencySetup-2-2-Thunk.swift","content":[{"inlineContent":[{"type":"text","text":"Alternatively, you can declare a throwaway type that adopts the protocol and contains the logic."},{"type":"text","text":" "},{"text":"Optionally, you can call it ","type":"text"},{"type":"codeVoice","code":"Default<API Protocol>ValueFactory"},{"type":"text","text":" which will allow you to omit the"},{"type":"text","text":" "},{"code":"defaultValueFactory","type":"codeVoice"},{"type":"text","text":" parameter and use the shortened "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies\/Dependency(lowercased:)"},{"type":"text","text":" macro."}],"type":"paragraph"}]},{"caption":[{"type":"paragraph","inlineContent":[{"text":"Assume that the code of the first step of this section is elsewhere but accessible from","type":"text"},{"text":" ","type":"text"},{"code":"ClownManager.swift","type":"codeVoice"},{"type":"text","text":"."}]}],"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"As a final option, if you prefer to package the default value factory implementation away from the"},{"type":"text","text":" "},{"text":"dependency declaration, you can just typealias a type with the expected name so you can use the","type":"text"},{"text":" ","type":"text"},{"text":"shortened ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies\/Dependency(lowercased:)"},{"type":"text","text":" macro."}]}],"code":"DependencySetup-2-3-Typealias.swift","type":"step","media":null,"runtimePreview":null}],"contentSection":[{"kind":"contentAndMedia","content":[{"inlineContent":[{"type":"text","text":"Before we declare the dependency it’s best to ready a default dependency value factory which will be wired"},{"type":"text","text":" "},{"type":"text","text":"up to generate a default value for the dependency the first time it is needed."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"You can either extend an existing type to adopt the protocol or create a standalone type for the task."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"It is recommended to do either on the same file where the dependency is declared so it can be declared"},{"type":"text","text":" "},{"type":"codeVoice","code":"private"},{"text":" and thus avoid exposing any deatils of the default dependency value factory implementation.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The adoption of this protocol is also often the best place to put any logic that generates a different"},{"type":"text","text":" "},{"text":"default implementation depending on i.e. build flags or build configuration. We’ll do a sample of that","type":"text"},{"type":"text","text":" "},{"type":"text","text":"through this tutorial."}]}],"mediaPosition":"trailing"}],"anchor":"Implement-the-default-dependency-value-factory","title":"Implement the default dependency value factory"},{"title":"Attach the @Dependency macro to the API protocol","contentSection":[{"content":[{"inlineContent":[{"text":"With the default dependency value factory in place, the next step is just to attach the ","type":"text"},{"code":"@Dependency","type":"codeVoice"},{"type":"text","text":" "},{"text":"macro to the API protocol.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"We will now different use cases and how to use the macro’s parameters to deal with them.","type":"text"}],"type":"paragraph"}],"kind":"contentAndMedia","mediaPosition":"trailing"}],"anchor":"Attach-the-Dependency-macro-to-the-API-protocol","stepsSection":[{"content":[{"inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"defaultValueFactory"},{"type":"text","text":" parameter is used to point the macro to the implementation of the protocol"},{"text":" ","type":"text"},{"type":"text","text":"that will produce the default value when requested."}],"type":"paragraph"}],"media":null,"code":"DependencySetup-3-1-ClownManagerCustomFactory.swift","runtimePreview":null,"type":"step","caption":[{"inlineContent":[{"type":"text","text":"Applying the macro will generate a dependency protocol and dependency key based on the attachee"},{"text":" ","type":"text"},{"text":"API protocol.","type":"text"}],"type":"paragraph"}]},{"media":null,"runtimePreview":null,"type":"step","caption":[],"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"If you have a type named with the pattern "},{"code":"Default<API Protocol>ValueFactory","type":"codeVoice"},{"text":" you can omit the","type":"text"},{"text":" ","type":"text"},{"code":"defaultValueFactory","type":"codeVoice"},{"type":"text","text":" parameter from the macro and it will automatically catch on it. Here you can see"},{"text":" ","type":"text"},{"type":"text","text":"the expanded version of such a use case"}]}],"code":"DependencySetup-3-2-ClownManagerAllDefaults.swift"},{"caption":[],"code":"DependencySetup-3-3-HONKDeviceLowercased.swift","runtimePreview":null,"media":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"text":"Finally if your API protocol type starts with an all caps acronym you can adjust the macro behavior so","type":"text"},{"text":" ","type":"text"},{"text":"all the generated types will respect Swift naming conventions using the ","type":"text"},{"code":"lowercased","type":"codeVoice"},{"text":" parameter.","type":"text"}]}]}]},{"title":"Potatoes!","stepsSection":[{"caption":[],"type":"step","code":"DependencySetup-4-1-GlobalDependencyExtension.swift","content":[{"type":"paragraph","inlineContent":[{"text":"You will need to declare an extension to ","type":"text"},{"type":"codeVoice","code":"GlobalDependencies"},{"type":"text","text":" with the same access as your API Protocol."},{"text":" ","type":"text"},{"type":"text","text":"That extension will adopt "},{"code":"<API protocol>.Dependency","type":"codeVoice"},{"type":"text","text":". Its whole implementation can be taken care of by"},{"text":" ","type":"text"},{"type":"text","text":"the "},{"type":"codeVoice","code":"#GlobalDependency"},{"text":" macro, with the API protocol as its parameter.","type":"text"}]}],"runtimePreview":null,"media":null},{"runtimePreview":null,"media":null,"caption":[],"content":[{"inlineContent":[{"text":"The macro will expand into an implementation of the dependency protocol which accounts for potential","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"overrides."}],"type":"paragraph"}],"code":"DependencySetup-4-2-GlobalDependencyExtensionExpanded.swift","type":"step"}],"contentSection":[{"kind":"contentAndMedia","mediaPosition":"trailing","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Now that all the auxiliary types are defined, we have to add our dependency to "},{"code":"GlobalDependencies","type":"codeVoice"},{"text":" so it","type":"text"},{"type":"text","text":" "},{"text":"will be injectable and overridable. Due to the limitations of Swift macros (as of Swift 5.9) there’s a bit","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"more code to write."}]}]}],"anchor":"Potatoes"}]},{"abstract":[{"type":"text","text":"Once you have your dependencies set up, you’ll want to inject them into your codebase’s components. The"},{"text":" ","type":"text"},{"type":"text","text":"GlobalDependencies package makes it straightforward while ensuring your component’s dependencies are well"},{"type":"text","text":" "},{"text":"managed and well understood.","type":"text"}],"title":"Injecting Dependencies","action":{"isActive":true,"identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection","overridingTitleInlineContent":[{"type":"text","text":"Get started"}],"type":"reference","overridingTitle":"Get started"},"kind":"callToAction","featuredEyebrow":"Tutorial"}],"schemaVersion":{"patch":0,"minor":3,"major":0},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup"},"kind":"project","references":{"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyInjection":{"kind":"project","title":"Injecting Dependencies","url":"\/tutorials\/globaldependencies\/dependencyinjection","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection","role":"project","estimatedTime":"10min","abstract":[{"type":"text","text":"Once you have your dependencies set up, you’ll want to inject them into your codebase’s components. The"},{"text":" ","type":"text"},{"text":"GlobalDependencies package makes it straightforward while ensuring your component’s dependencies are well","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"managed and well understood."}],"type":"topic"},"DependencySetup-3-2-ClownManagerAllDefaults.swift":{"identifier":"DependencySetup-3-2-ClownManagerAllDefaults.swift","content":["@Dependency","protocol ClownManager {","    func honk()","","    func slap(victim: Person)","","    func pieToFace(pie: Pie, victim: Person)","","    var shoeSize: Double { get set }","","    \/\/ And more...","","    \/\/ Generated by the @Dependency macro","","    typealias Dependency = ClownManagerDependency","","    typealias DependencyKey = ClownManagerDependencyKey","}","","\/\/ Generated by the @Dependency macro","","protocol ClownManagerDependency: Dependencies {","    var clownManager: any ClownManager { get }","}","","struct ClownManagerDependencyKey: DependencyKey {","    static let defaultValue: any ClownManager = DefaultClownManagerValueFactory.makeDefaultValue()","}","","\/\/ Default Dependency Value Factory","","private struct DefaultClownManagerValueFactory: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}"],"syntax":"swift","fileName":"ClownManager.swift","type":"file","highlights":[{"line":1},{"line":27},{"line":32}],"fileType":"swift"},"Xcode 15":{"url":"https:\/\/developer.apple.com\/download\/","title":"Xcode 15","type":"xcodeRequirement","identifier":"Xcode 15"},"DependencySetup-2-1-Extension.swift":{"type":"file","fileType":"swift","content":["private extension PagliacciClownManager: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}"],"fileName":"ClownManager.swift","highlights":[],"syntax":"swift","identifier":"DependencySetup-2-1-Extension.swift"},"doc://GlobalDependencies/tutorials/Using-GlobalDependencies/Setting-up-a-Dependency":{"role":"article","abstract":[],"type":"topic","kind":"article","url":"\/tutorials\/using-globaldependencies\/setting-up-a-dependency","title":"Setting up a Dependency","identifier":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Setting-up-a-Dependency"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencySetup#Before-You-Begin":{"identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Before-You-Begin","url":"\/tutorials\/globaldependencies\/dependencysetup#Before-You-Begin","kind":"section","title":"Before You Begin","abstract":[{"type":"text","text":"This tutorial guides you through a sample set up for a global dependency using the "},{"type":"codeVoice","code":"GlobalDependencies"},{"type":"text","text":" "},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}],"role":"pseudoSymbol","type":"section"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencySetup#Potatoes":{"identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Potatoes","url":"\/tutorials\/globaldependencies\/dependencysetup#Potatoes","kind":"section","title":"Potatoes!","abstract":[{"type":"text","text":"This tutorial guides you through a sample set up for a global dependency using the "},{"type":"codeVoice","code":"GlobalDependencies"},{"type":"text","text":" "},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}],"role":"pseudoSymbol","type":"section"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyInjection#Inject-your-dependencies-on-initialization":{"role":"pseudoSymbol","abstract":[{"type":"text","text":"Once you have your dependencies set up, you’ll want to inject them into your codebase’s components. The"},{"type":"text","text":" "},{"type":"text","text":"GlobalDependencies package makes it straightforward while ensuring your component’s dependencies are well"},{"type":"text","text":" "},{"text":"managed and well understood.","type":"text"}],"kind":"section","type":"section","url":"\/tutorials\/globaldependencies\/dependencyinjection#Inject-your-dependencies-on-initialization","title":"Inject your dependencies on initialization","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Inject-your-dependencies-on-initialization"},"DependencySetup-1-3-HONKDevice.swift":{"fileType":"swift","content":["protocol HONKDevice {","    func honk(times: Int)","","    func hooooooonk()","}"],"syntax":"swift","fileName":"HONKDevice.swift","type":"file","highlights":[],"identifier":"DependencySetup-1-3-HONKDevice.swift"},"doc://GlobalDependencies/tutorials/Using-GlobalDependencies/Overriding-Dependencies":{"role":"article","abstract":[],"kind":"article","type":"topic","url":"\/tutorials\/using-globaldependencies\/overriding-dependencies","title":"Overriding Dependencies","identifier":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Overriding-Dependencies"},"DependencySetup-1-2-PagliacciClownManager.swift":{"identifier":"DependencySetup-1-2-PagliacciClownManager.swift","fileType":"swift","content":["import PagliacciSDK","","class PagliacciClownManager: ClownManager {","    \/\/ Pretend there's an implementation here.","}"],"syntax":"swift","highlights":[],"fileName":"PagliacciClownManager.swift","type":"file"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyInjection#Attach-the-InjectedDependencies-Macro-to-Your-Component":{"identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Attach-the-InjectedDependencies-Macro-to-Your-Component","url":"\/tutorials\/globaldependencies\/dependencyinjection#Attach-the-InjectedDependencies-Macro-to-Your-Component","kind":"section","title":"Attach the InjectedDependencies Macro to Your Component","abstract":[{"type":"text","text":"Once you have your dependencies set up, you’ll want to inject them into your codebase’s components. The"},{"type":"text","text":" "},{"type":"text","text":"GlobalDependencies package makes it straightforward while ensuring your component’s dependencies are well"},{"type":"text","text":" "},{"text":"managed and well understood.","type":"text"}],"role":"pseudoSymbol","type":"section"},"DependencySetup-2-3-Typealias.swift":{"identifier":"DependencySetup-2-3-Typealias.swift","fileType":"swift","content":["private typealias DefaultClownManagerValueFactory = PagliacciClownManager"],"syntax":"swift","highlights":[{"line":1}],"fileName":"ClownManager.swift","type":"file"},"DependencySetup-4-1-GlobalDependencyExtension.swift":{"identifier":"DependencySetup-4-1-GlobalDependencyExtension.swift","fileType":"swift","content":["@Dependency","protocol ClownManager {","    func honk()","","    func slap(victim: Person)","","    func pieToFace(pie: Pie, victim: Person)","","    var shoeSize: Double { get set }","","    \/\/ And more...","}","","\/\/ Default Dependency Value Factory","","private struct DefaultClownManagerValueFactory: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}","","\/\/ GlobalDependencies Integration","","extension GlobalDependencies: ClownManager.Dependency {","    #GlobalDependency(type: ClownManager)","}"],"syntax":"swift","highlights":[],"fileName":"ClownManager.swift","type":"file"},"doc://GlobalDependencies/tutorials/Using-GlobalDependencies/Injecting-Dependencies":{"identifier":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Injecting-Dependencies","url":"\/tutorials\/using-globaldependencies\/injecting-dependencies","kind":"article","title":"Injecting Dependencies","abstract":[],"role":"article","type":"topic"},"doc://GlobalDependencies/documentation/GlobalDependencies/DefaultDependencyValueFactory":{"kind":"symbol","url":"\/documentation\/globaldependencies\/defaultdependencyvaluefactory","abstract":[{"text":"A protocol adopted by types that can build the default value for a dependency.","type":"text"}],"identifier":"doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies\/DefaultDependencyValueFactory","navigatorTitle":[{"text":"DefaultDependencyValueFactory","kind":"identifier"}],"fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"text":"DefaultDependencyValueFactory","kind":"identifier"}],"title":"DefaultDependencyValueFactory","type":"topic","role":"symbol"},"DependencySetup-3-3-HONKDeviceLowercased.swift":{"fileType":"swift","syntax":"swift","highlights":[],"identifier":"DependencySetup-3-3-HONKDeviceLowercased.swift","content":["@Dependency(lowercased: \"honkDevice\")","protocol HONKDevice {","    func honk(times: Int)","","    func hooooooonk()","","    \/\/ And more...","","    \/\/ Generated by the @Dependency macro","","    typealias Dependency = HONKDeviceDependency","","    typealias DependencyKey = HONKDeviceDependencyKey","}","","\/\/ Generated by the @Dependency macro","","protocol HONKDeviceDependency: Dependencies {","    var honkDevice: any HONKDevice { get }","}","","struct HONKDeviceDependencyKey: DependencyKey {","    static let defaultValue: any HONKDevice = DefaultHONKDeviceValueFactory.makeDefaultValue()","}","","\/\/ Default Dependency Value Factory","","private struct DefaultHONKDeviceValueFactory: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any HONKDevice {","        \/\/ Let's pretend we got this type defined somewhere…","        AirHONKDevice()","    }","}"],"fileName":"HONKDevice.swift","type":"file"},"doc://GlobalDependencies/tutorials/Using-GlobalDependencies":{"identifier":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies","url":"\/tutorials\/using-globaldependencies","kind":"overview","title":"Using GlobalDependencies","abstract":[{"type":"text","text":"The GlobalDependencies package helps abstract away global dependencies, inject them into components and"},{"text":" ","type":"text"},{"text":"override them for test mocking purposes. The following tutorials detail how to perform each of those tasks.","type":"text"}],"role":"overview","type":"topic"},"doc://GlobalDependencies/documentation/GlobalDependencies/Dependency(lowercased:)":{"kind":"symbol","url":"\/documentation\/globaldependencies\/dependency(lowercased:)","abstract":[{"type":"text","text":"Variant of the "},{"code":"Dependency","type":"codeVoice"},{"type":"text","text":" macro that does not take a default value factory type."}],"identifier":"doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies\/Dependency(lowercased:)","fragments":[{"text":"macro","kind":"keyword"},{"kind":"text","text":" "},{"text":"Dependency","kind":"identifier"},{"kind":"text","text":"("},{"kind":"externalParam","text":"lowercased"},{"text":": ","kind":"text"},{"text":"StaticString","kind":"typeIdentifier","preciseIdentifier":"s:s12StaticStringV"},{"text":"?)","kind":"text"}],"title":"Dependency(lowercased:)","type":"topic","role":"symbol"},"DependencySetup-2-2-Thunk.swift":{"syntax":"swift","fileName":"ClownManager.swift","fileType":"swift","highlights":[{"line":1}],"identifier":"DependencySetup-2-2-Thunk.swift","type":"file","content":["private struct DefaultClownManagerValueFactory: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}"]},"DependencySetup-4-2-GlobalDependencyExtensionExpanded.swift":{"fileType":"swift","syntax":"swift","highlights":[{"line":29},{"line":30},{"line":31},{"line":32},{"line":33}],"identifier":"DependencySetup-4-2-GlobalDependencyExtensionExpanded.swift","content":["@Dependency","protocol ClownManager {","    func honk()","","    func slap(victim: Person)","","    func pieToFace(pie: Pie, victim: Person)","","    var shoeSize: Double { get set }","","    \/\/ And more...","}","","\/\/ Default Dependency Value Factory","","private struct DefaultClownManagerValueFactory: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}","","\/\/ GlobalDependencies Integration","","extension GlobalDependencies: ClownManager.Dependency {","    \/\/ Generated by the #GlobalDependency macro","","    var clownManager: any ClownManager {","        resolveDependencyFor(key: ClownManager.DependencyKey.self)","    }","}"],"fileName":"ClownManager.swift","type":"file"},"DependencySetup-1-1-ClownManager.swift":{"content":["protocol ClownManager {","    func honk()","","    func slap(victim: Person)","","    func pieToFace(pie: Pie, victim: Person)","","    var shoeSize: Double { get set }","","    \/\/ And more...","}"],"identifier":"DependencySetup-1-1-ClownManager.swift","type":"file","highlights":[],"fileName":"ClownManager.swift","syntax":"swift","fileType":"swift"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyOverride#Set-up-a-Mock-Dependency-Implementation":{"kind":"section","abstract":[{"type":"text","text":"One of the most important reasons to use dependency injection is to make your software components testable by"},{"type":"text","text":" "},{"type":"text","text":"taking control of the dependencies’ side effects during testing. Any dependencies you manage through"},{"type":"text","text":" "},{"text":"GlobalDependencies are simple to override during tests with the provided API.","type":"text"}],"identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride#Set-up-a-Mock-Dependency-Implementation","title":"Set up a Mock Dependency Implementation","url":"\/tutorials\/globaldependencies\/dependencyoverride#Set-up-a-Mock-Dependency-Implementation","role":"pseudoSymbol","type":"section"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencySetup#Implement-the-default-dependency-value-factory":{"kind":"section","abstract":[{"type":"text","text":"This tutorial guides you through a sample set up for a global dependency using the "},{"type":"codeVoice","code":"GlobalDependencies"},{"type":"text","text":" "},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}],"identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Implement-the-default-dependency-value-factory","url":"\/tutorials\/globaldependencies\/dependencysetup#Implement-the-default-dependency-value-factory","title":"Implement the default dependency value factory","role":"pseudoSymbol","type":"section"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyOverride":{"role":"project","kind":"project","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride","estimatedTime":"10min","url":"\/tutorials\/globaldependencies\/dependencyoverride","abstract":[{"type":"text","text":"One of the most important reasons to use dependency injection is to make your software components testable by"},{"text":" ","type":"text"},{"type":"text","text":"taking control of the dependencies’ side effects during testing. Any dependencies you manage through"},{"type":"text","text":" "},{"text":"GlobalDependencies are simple to override during tests with the provided API.","type":"text"}],"title":"Overriding Dependencies","type":"topic"},"DependencySetup-3-1-ClownManagerCustomFactory.swift":{"identifier":"DependencySetup-3-1-ClownManagerCustomFactory.swift","fileType":"swift","content":["@Dependency(defaultValueFactory: PagliacciClownManager)","protocol ClownManager {","    func honk()","","    func slap(victim: Person)","","    func pieToFace(pie: Pie, victim: Person)","","    var shoeSize: Double { get set }","","    \/\/ And more...","","    \/\/ Generated by the @Dependency macro","","    typealias Dependency = ClownManagerDependency","","    typealias DependencyKey = ClownManagerDependencyKey","}","","\/\/ Generated by the @Dependency macro","","protocol ClownManagerDependency: Dependencies {","    var clownManager: any ClownManager { get }","}","","struct ClownManagerDependencyKey: DependencyKey {","    static let defaultValue: any ClownManager = PagliacciClownManager.makeDefaultValue()","}","","\/\/ Default Dependency Value Factory","","private extension PagliacciClownManager: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}"],"syntax":"swift","highlights":[],"fileName":"ClownManager.swift","type":"file"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyInjection#Adjust-Access-Control-of-Your-Dependencies-If-Needed":{"identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Adjust-Access-Control-of-Your-Dependencies-If-Needed","url":"\/tutorials\/globaldependencies\/dependencyinjection#Adjust-Access-Control-of-Your-Dependencies-If-Needed","title":"Adjust Access Control of Your Dependencies If Needed","kind":"section","abstract":[{"type":"text","text":"Once you have your dependencies set up, you’ll want to inject them into your codebase’s components. The"},{"type":"text","text":" "},{"type":"text","text":"GlobalDependencies package makes it straightforward while ensuring your component’s dependencies are well"},{"type":"text","text":" "},{"text":"managed and well understood.","type":"text"}],"role":"pseudoSymbol","type":"section"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencySetup#Attach-the-Dependency-macro-to-the-API-protocol":{"identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Attach-the-Dependency-macro-to-the-API-protocol","url":"\/tutorials\/globaldependencies\/dependencysetup#Attach-the-Dependency-macro-to-the-API-protocol","kind":"section","title":"Attach the @Dependency macro to the API protocol","abstract":[{"type":"text","text":"This tutorial guides you through a sample set up for a global dependency using the "},{"type":"codeVoice","code":"GlobalDependencies"},{"type":"text","text":" "},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}],"role":"pseudoSymbol","type":"section"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyOverride#Build-a-GlobalDependencies-Value-With-Your-Overrides":{"identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride#Build-a-GlobalDependencies-Value-With-Your-Overrides","url":"\/tutorials\/globaldependencies\/dependencyoverride#Build-a-GlobalDependencies-Value-With-Your-Overrides","title":"Build a `GlobalDependencies` Value With Your Overrides","kind":"section","abstract":[{"type":"text","text":"One of the most important reasons to use dependency injection is to make your software components testable by"},{"type":"text","text":" "},{"type":"text","text":"taking control of the dependencies’ side effects during testing. Any dependencies you manage through"},{"type":"text","text":" "},{"text":"GlobalDependencies are simple to override during tests with the provided API.","type":"text"}],"role":"pseudoSymbol","type":"section"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencySetup":{"kind":"project","url":"\/tutorials\/globaldependencies\/dependencysetup","abstract":[{"type":"text","text":"This tutorial guides you through a sample set up for a global dependency using the "},{"code":"GlobalDependencies","type":"codeVoice"},{"type":"text","text":" "},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}],"identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup","estimatedTime":"15min","title":"Setting up a Global Dependency","type":"topic","role":"project"}}}