{"schemaVersion":{"major":0,"minor":3,"patch":0},"identifier":{"url":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup","interfaceLanguage":"swift"},"hierarchy":{"reference":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies","paths":[["doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies","doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/$volume","doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Setting-up-a-Dependency"],["doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies"]],"modules":[{"reference":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Setting-up-a-Dependency","projects":[{"sections":[{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Before-You-Begin","kind":"task"},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Implement-the-default-dependency-value-factory","kind":"task"},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Attach-the-Dependency-macro-to-the-API-protocol","kind":"task"},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Potatoes","kind":"task"}],"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup"}]},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Injecting-Dependencies","projects":[{"sections":[{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Attach-the-InjectedDependencies-Macro-to-Your-Component","kind":"task"},{"kind":"task","reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Adjust-Access-Control-of-Your-Dependencies-If-Needed"},{"kind":"task","reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Inject-your-dependencies-on-initialization"}],"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection"}]},{"reference":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Overriding-Dependencies","projects":[{"reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride","sections":[{"kind":"task","reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride#Set-up-a-Mock-Dependency-Implementation"},{"kind":"task","reference":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride#Build-a-GlobalDependencies-Value-With-Your-Overrides"}]}]}]},"metadata":{"category":"Using GlobalDependencies","role":"project","title":"Setting up a Global Dependency","categoryPathComponent":"Using-GlobalDependencies"},"sections":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This tutorial guides you through a sample set up for a global dependency using the "},{"type":"codeVoice","code":"GlobalDependencies"},{"text":" ","type":"text"},{"text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The tutorial will also demonstrate how to name types and variables to take additional advantage of the"},{"type":"text","text":" "},{"type":"text","text":"GlobalDependencies macros defaults."}]}],"estimatedTimeInMinutes":15,"chapter":"Setting up a Dependency","xcodeRequirement":"Xcode 15","kind":"hero","title":"Setting up a Global Dependency"},{"tasks":[{"stepsSection":[{"type":"step","runtimePreview":null,"code":"DependencySetup-1-1-ClownManager.swift","media":null,"content":[{"inlineContent":[{"type":"text","text":"First we’ll have a "},{"type":"codeVoice","code":"ClownManager"},{"text":" protocol which declares the API our app needs to manage its clown. To","type":"text"},{"text":" ","type":"text"},{"text":"avoid confusion with other protocols required for dependency management we will call this one the","type":"text"},{"type":"text","text":" "},{"type":"text","text":"“API protocol” throughout the tutorial."}],"type":"paragraph"}],"caption":[]},{"caption":[],"media":null,"code":"DependencySetup-1-2-PagliacciClownManager.swift","type":"step","content":[{"inlineContent":[{"text":"We also have a default implementation that wraps the clown-as-a-service API from pagliacci.io. We","type":"text"},{"type":"text","text":" "},{"type":"text","text":"declare it as a class but could be any type as long as it adopts "},{"type":"codeVoice","code":"ClownManager"}],"type":"paragraph"}],"runtimePreview":null},{"code":"DependencySetup-1-3-HONKDevice.swift","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Finally as a thinly veiled conceit to demonstrate how the "},{"code":"@Dependency","type":"codeVoice"},{"type":"text","text":" macro’s "},{"type":"codeVoice","code":"lowercased:"},{"text":" parameter","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"works, we will also have a "},{"code":"HONKDevice","type":"codeVoice"},{"type":"text","text":" protocol for an additional dependency that can be reused by"},{"type":"text","text":" "},{"type":"text","text":"either clowns or geese."}]}],"media":null,"caption":[],"runtimePreview":null,"type":"step"}],"contentSection":[{"mediaPosition":"trailing","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Declaring the API for a dependency is out of scope for this tutorial, it depends on the needs of your"},{"text":" ","type":"text"},{"type":"text","text":"codebase. For the sake of this tutorial we will have already some types related to clown management that we"},{"type":"text","text":" "},{"text":"plan on using to manage our app’s clown. If your app doesn’t manage a clown you’re doing it wrong.","type":"text"}]}],"kind":"contentAndMedia"}],"title":"Before You Begin","anchor":"Before-You-Begin"},{"stepsSection":[{"content":[{"type":"paragraph","inlineContent":[{"text":"You can extend an existing type to adopt ","type":"text"},{"isActive":true,"identifier":"doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies\/DefaultDependencyValueFactory","type":"reference"},{"type":"text","text":". For example, addimg this to"},{"type":"text","text":" "},{"text":"the same file where you’ll be declaring the dependency proper:","type":"text"}]}],"caption":[],"media":null,"runtimePreview":null,"code":"DependencySetup-2-1-Extension.swift","type":"step"},{"caption":[],"code":"DependencySetup-2-2-Thunk.swift","type":"step","media":null,"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"text":"Alternatively, you can declare a throwaway type that adopts the protocol and contains the logic.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"Optionally, you can call it "},{"code":"Default<API Protocol>ValueFactory","type":"codeVoice"},{"type":"text","text":" which will allow you to omit the"},{"type":"text","text":" "},{"type":"codeVoice","code":"defaultValueFactory"},{"type":"text","text":" parameter and use the shortened "},{"isActive":true,"identifier":"doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies\/Dependency(lowercased:)","type":"reference"},{"type":"text","text":" macro."}]}]},{"caption":[{"type":"paragraph","inlineContent":[{"text":"Assume that the code of the first step of this section is elsewhere but accessible from","type":"text"},{"text":" ","type":"text"},{"code":"ClownManager.swift","type":"codeVoice"},{"type":"text","text":"."}]}],"code":"DependencySetup-2-3-Typealias.swift","runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"As a final option, if you prefer to package the default value factory implementation away from the"},{"type":"text","text":" "},{"text":"dependency declaration, you can just typealias a type with the expected name so you can use the","type":"text"},{"text":" ","type":"text"},{"text":"shortened ","type":"text"},{"isActive":true,"identifier":"doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies\/Dependency(lowercased:)","type":"reference"},{"type":"text","text":" macro."}],"type":"paragraph"}],"media":null,"type":"step"}],"contentSection":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Before we declare the dependency it’s best to ready a default dependency value factory which will be wired","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"up to generate a default value for the dependency the first time it is needed."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can either extend an existing type to adopt the protocol or create a standalone type for the task."}]},{"inlineContent":[{"text":"It is recommended to do either on the same file where the dependency is declared so it can be declared","type":"text"},{"text":" ","type":"text"},{"code":"private","type":"codeVoice"},{"type":"text","text":" and thus avoid exposing any deatils of the default dependency value factory implementation."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"The adoption of this protocol is also often the best place to put any logic that generates a different","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"default implementation depending on i.e. build flags or build configuration. We’ll do a sample of that"},{"text":" ","type":"text"},{"type":"text","text":"through this tutorial."}]}],"kind":"contentAndMedia","mediaPosition":"trailing"}],"anchor":"Implement-the-default-dependency-value-factory","title":"Implement the default dependency value factory"},{"contentSection":[{"mediaPosition":"trailing","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"With the default dependency value factory in place, the next step is just to attach the "},{"type":"codeVoice","code":"@Dependency"},{"type":"text","text":" "},{"type":"text","text":"macro to the API protocol."}]},{"inlineContent":[{"type":"text","text":"We will now different use cases and how to use the macro’s parameters to deal with them."}],"type":"paragraph"}],"kind":"contentAndMedia"}],"stepsSection":[{"type":"step","code":"DependencySetup-3-1-ClownManagerCustomFactory.swift","runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"The "},{"code":"defaultValueFactory","type":"codeVoice"},{"type":"text","text":" parameter is used to point the macro to the implementation of the protocol"},{"text":" ","type":"text"},{"type":"text","text":"that will produce the default value when requested."}],"type":"paragraph"}],"media":null,"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Applying the macro will generate a dependency protocol and dependency key based on the attachee"},{"type":"text","text":" "},{"text":"API protocol.","type":"text"}]}]},{"caption":[],"media":null,"content":[{"type":"paragraph","inlineContent":[{"text":"If you have a type named with the pattern ","type":"text"},{"type":"codeVoice","code":"Default<API Protocol>ValueFactory"},{"type":"text","text":" you can omit the"},{"type":"text","text":" "},{"type":"codeVoice","code":"defaultValueFactory"},{"type":"text","text":" parameter from the macro and it will automatically catch on it. Here you can see"},{"text":" ","type":"text"},{"type":"text","text":"the expanded version of such a use case"}]}],"type":"step","code":"DependencySetup-3-2-ClownManagerAllDefaults.swift","runtimePreview":null},{"caption":[],"runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"text":"Finally if your API protocol type starts with an all caps acronym you can adjust the macro behavior so","type":"text"},{"type":"text","text":" "},{"type":"text","text":"all the generated types will respect Swift naming conventions using the "},{"type":"codeVoice","code":"lowercased"},{"type":"text","text":" parameter."}]}],"media":null,"code":"DependencySetup-3-3-HONKDeviceLowercased.swift"}],"title":"Attach the @Dependency macro to the API protocol","anchor":"Attach-the-Dependency-macro-to-the-API-protocol"},{"contentSection":[{"kind":"contentAndMedia","content":[{"inlineContent":[{"type":"text","text":"Now that all the auxiliary types are defined, we have to add our dependency to "},{"type":"codeVoice","code":"GlobalDependencies"},{"type":"text","text":" so it"},{"type":"text","text":" "},{"text":"will be injectable and overridable. Due to the limitations of Swift macros (as of Swift 5.9) there’s a bit","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"more code to write."}],"type":"paragraph"}],"mediaPosition":"trailing"}],"anchor":"Potatoes","stepsSection":[{"code":"DependencySetup-4-1-GlobalDependencyExtension.swift","caption":[],"runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"You will need to declare an extension to "},{"type":"codeVoice","code":"GlobalDependencies"},{"text":" with the same access as your API Protocol.","type":"text"},{"type":"text","text":" "},{"text":"That extension will adopt ","type":"text"},{"code":"<API protocol>.Dependency","type":"codeVoice"},{"type":"text","text":". Its whole implementation can be taken care of by"},{"type":"text","text":" "},{"text":"the ","type":"text"},{"code":"#GlobalDependency","type":"codeVoice"},{"text":" macro, with the API protocol as its parameter.","type":"text"}],"type":"paragraph"}],"type":"step","media":null},{"code":"DependencySetup-4-2-GlobalDependencyExtensionExpanded.swift","runtimePreview":null,"type":"step","caption":[],"content":[{"inlineContent":[{"text":"The macro will expand into an implementation of the dependency protocol which accounts for potential","type":"text"},{"type":"text","text":" "},{"type":"text","text":"overrides."}],"type":"paragraph"}],"media":null}],"title":"Potatoes!"}],"kind":"tasks"},{"title":"Injecting Dependencies","abstract":[{"text":"Once you have your dependencies set up, you’ll want to inject them into your codebase’s components. The","type":"text"},{"text":" ","type":"text"},{"text":"GlobalDependencies package makes it straightforward while ensuring your component’s dependencies are well","type":"text"},{"type":"text","text":" "},{"text":"managed and well understood.","type":"text"}],"action":{"overridingTitle":"Get started","isActive":true,"type":"reference","overridingTitleInlineContent":[{"type":"text","text":"Get started"}],"identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection"},"featuredEyebrow":"Tutorial","kind":"callToAction"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/tutorials\/globaldependencies\/dependencysetup"]}],"kind":"project","references":{"DependencySetup-3-3-HONKDeviceLowercased.swift":{"syntax":"swift","highlights":[],"content":["@Dependency(lowercased: \"honkDevice\")","protocol HONKDevice {","    func honk(times: Int)","","    func hooooooonk()","","    \/\/ And more...","","    \/\/ Generated by the @Dependency macro","","    typealias Dependency = HONKDeviceDependency","","    typealias DependencyKey = HONKDeviceDependencyKey","}","","\/\/ Generated by the @Dependency macro","","protocol HONKDeviceDependency: Dependencies {","    var honkDevice: any HONKDevice { get }","}","","struct HONKDeviceDependencyKey: DependencyKey {","    static let defaultValue: any HONKDevice = DefaultHONKDeviceValueFactory.makeDefaultValue()","}","","\/\/ Default Dependency Value Factory","","private struct DefaultHONKDeviceValueFactory: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any HONKDevice {","        \/\/ Let's pretend we got this type defined somewhere…","        AirHONKDevice()","    }","}"],"type":"file","fileName":"HONKDevice.swift","fileType":"swift","identifier":"DependencySetup-3-3-HONKDeviceLowercased.swift"},"DependencySetup-2-2-Thunk.swift":{"syntax":"swift","identifier":"DependencySetup-2-2-Thunk.swift","type":"file","fileName":"ClownManager.swift","highlights":[{"line":1}],"content":["private struct DefaultClownManagerValueFactory: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}"],"fileType":"swift"},"DependencySetup-1-1-ClownManager.swift":{"syntax":"swift","highlights":[],"content":["protocol ClownManager {","    func honk()","","    func slap(victim: Person)","","    func pieToFace(pie: Pie, victim: Person)","","    var shoeSize: Double { get set }","","    \/\/ And more...","}"],"type":"file","fileName":"ClownManager.swift","fileType":"swift","identifier":"DependencySetup-1-1-ClownManager.swift"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyInjection#Adjust-Access-Control-of-Your-Dependencies-If-Needed":{"role":"pseudoSymbol","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Adjust-Access-Control-of-Your-Dependencies-If-Needed","title":"Adjust Access Control of Your Dependencies If Needed","kind":"section","url":"\/tutorials\/globaldependencies\/dependencyinjection#Adjust-Access-Control-of-Your-Dependencies-If-Needed","type":"section","abstract":[{"text":"Once you have your dependencies set up, you’ll want to inject them into your codebase’s components. The","type":"text"},{"type":"text","text":" "},{"text":"GlobalDependencies package makes it straightforward while ensuring your component’s dependencies are well","type":"text"},{"type":"text","text":" "},{"type":"text","text":"managed and well understood."}]},"DependencySetup-2-3-Typealias.swift":{"syntax":"swift","highlights":[{"line":1}],"content":["private typealias DefaultClownManagerValueFactory = PagliacciClownManager"],"type":"file","fileName":"ClownManager.swift","fileType":"swift","identifier":"DependencySetup-2-3-Typealias.swift"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencySetup#Potatoes":{"role":"pseudoSymbol","type":"section","url":"\/tutorials\/globaldependencies\/dependencysetup#Potatoes","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Potatoes","abstract":[{"type":"text","text":"This tutorial guides you through a sample set up for a global dependency using the "},{"code":"GlobalDependencies","type":"codeVoice"},{"text":" ","type":"text"},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}],"title":"Potatoes!","kind":"section"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyInjection#Inject-your-dependencies-on-initialization":{"role":"pseudoSymbol","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Inject-your-dependencies-on-initialization","title":"Inject your dependencies on initialization","kind":"section","url":"\/tutorials\/globaldependencies\/dependencyinjection#Inject-your-dependencies-on-initialization","type":"section","abstract":[{"type":"text","text":"Once you have your dependencies set up, you’ll want to inject them into your codebase’s components. The"},{"type":"text","text":" "},{"text":"GlobalDependencies package makes it straightforward while ensuring your component’s dependencies are well","type":"text"},{"type":"text","text":" "},{"text":"managed and well understood.","type":"text"}]},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyOverride":{"estimatedTime":"10min","url":"\/tutorials\/globaldependencies\/dependencyoverride","type":"topic","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride","kind":"project","title":"Overriding Dependencies","abstract":[{"text":"One of the most important reasons to use dependency injection is to make your software components testable by","type":"text"},{"type":"text","text":" "},{"text":"taking control of the dependencies’ side effects during testing. Any dependencies you manage through","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"GlobalDependencies are simple to override during tests with the provided API."}],"role":"project"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencySetup#Implement-the-default-dependency-value-factory":{"title":"Implement the default dependency value factory","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Implement-the-default-dependency-value-factory","url":"\/tutorials\/globaldependencies\/dependencysetup#Implement-the-default-dependency-value-factory","role":"pseudoSymbol","kind":"section","type":"section","abstract":[{"text":"This tutorial guides you through a sample set up for a global dependency using the ","type":"text"},{"type":"codeVoice","code":"GlobalDependencies"},{"text":" ","type":"text"},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}]},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyInjection":{"estimatedTime":"10min","url":"\/tutorials\/globaldependencies\/dependencyinjection","type":"topic","kind":"project","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection","title":"Injecting Dependencies","abstract":[{"type":"text","text":"Once you have your dependencies set up, you’ll want to inject them into your codebase’s components. The"},{"text":" ","type":"text"},{"text":"GlobalDependencies package makes it straightforward while ensuring your component’s dependencies are well","type":"text"},{"type":"text","text":" "},{"text":"managed and well understood.","type":"text"}],"role":"project"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencySetup#Before-You-Begin":{"url":"\/tutorials\/globaldependencies\/dependencysetup#Before-You-Begin","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Before-You-Begin","type":"section","title":"Before You Begin","kind":"section","abstract":[{"type":"text","text":"This tutorial guides you through a sample set up for a global dependency using the "},{"code":"GlobalDependencies","type":"codeVoice"},{"type":"text","text":" "},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}],"role":"pseudoSymbol"},"DependencySetup-1-2-PagliacciClownManager.swift":{"syntax":"swift","highlights":[],"content":["import PagliacciSDK","","class PagliacciClownManager: ClownManager {","    \/\/ Pretend there's an implementation here.","}"],"type":"file","fileName":"PagliacciClownManager.swift","fileType":"swift","identifier":"DependencySetup-1-2-PagliacciClownManager.swift"},"doc://GlobalDependencies/documentation/GlobalDependencies/Dependency(lowercased:)":{"title":"Dependency(lowercased:)","url":"\/documentation\/globaldependencies\/dependency(lowercased:)","abstract":[{"type":"text","text":"Variant of the "},{"type":"codeVoice","code":"Dependency"},{"type":"text","text":" macro that does not take a default value factory type."}],"type":"topic","fragments":[{"text":"macro","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"Dependency"},{"kind":"text","text":"("},{"kind":"externalParam","text":"lowercased"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:s12StaticStringV","kind":"typeIdentifier","text":"StaticString"},{"kind":"text","text":"?)"}],"role":"symbol","kind":"symbol","identifier":"doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies\/Dependency(lowercased:)"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencySetup":{"url":"\/tutorials\/globaldependencies\/dependencysetup","estimatedTime":"15min","type":"topic","abstract":[{"type":"text","text":"This tutorial guides you through a sample set up for a global dependency using the "},{"type":"codeVoice","code":"GlobalDependencies"},{"type":"text","text":" "},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}],"identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup","role":"project","kind":"project","title":"Setting up a Global Dependency"},"DependencySetup-3-1-ClownManagerCustomFactory.swift":{"syntax":"swift","highlights":[],"content":["@Dependency(defaultValueFactory: PagliacciClownManager)","protocol ClownManager {","    func honk()","","    func slap(victim: Person)","","    func pieToFace(pie: Pie, victim: Person)","","    var shoeSize: Double { get set }","","    \/\/ And more...","","    \/\/ Generated by the @Dependency macro","","    typealias Dependency = ClownManagerDependency","","    typealias DependencyKey = ClownManagerDependencyKey","}","","\/\/ Generated by the @Dependency macro","","protocol ClownManagerDependency: Dependencies {","    var clownManager: any ClownManager { get }","}","","struct ClownManagerDependencyKey: DependencyKey {","    static let defaultValue: any ClownManager = PagliacciClownManager.makeDefaultValue()","}","","\/\/ Default Dependency Value Factory","","private extension PagliacciClownManager: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}"],"type":"file","fileName":"ClownManager.swift","fileType":"swift","identifier":"DependencySetup-3-1-ClownManagerCustomFactory.swift"},"Xcode 15":{"title":"Xcode 15","type":"xcodeRequirement","identifier":"Xcode 15","url":"https:\/\/developer.apple.com\/download\/"},"doc://GlobalDependencies/tutorials/Using-GlobalDependencies":{"url":"\/tutorials\/using-globaldependencies","type":"topic","kind":"overview","identifier":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies","title":"Using GlobalDependencies","abstract":[{"text":"The GlobalDependencies package helps abstract away global dependencies, inject them into components and","type":"text"},{"type":"text","text":" "},{"text":"override them for test mocking purposes. The following tutorials detail how to perform each of those tasks.","type":"text"}],"role":"overview"},"doc://GlobalDependencies/tutorials/Using-GlobalDependencies/Injecting-Dependencies":{"role":"article","identifier":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Injecting-Dependencies","type":"topic","url":"\/tutorials\/using-globaldependencies\/injecting-dependencies","title":"Injecting Dependencies","kind":"article","abstract":[]},"DependencySetup-1-3-HONKDevice.swift":{"syntax":"swift","highlights":[],"content":["protocol HONKDevice {","    func honk(times: Int)","","    func hooooooonk()","}"],"type":"file","fileName":"HONKDevice.swift","fileType":"swift","identifier":"DependencySetup-1-3-HONKDevice.swift"},"doc://GlobalDependencies/documentation/GlobalDependencies/DefaultDependencyValueFactory":{"title":"DefaultDependencyValueFactory","identifier":"doc:\/\/GlobalDependencies\/documentation\/GlobalDependencies\/DefaultDependencyValueFactory","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"DefaultDependencyValueFactory","kind":"identifier"}],"role":"symbol","abstract":[{"type":"text","text":"A protocol adopted by types that can build the default value for a dependency."}],"kind":"symbol","type":"topic","navigatorTitle":[{"text":"DefaultDependencyValueFactory","kind":"identifier"}],"url":"\/documentation\/globaldependencies\/defaultdependencyvaluefactory"},"DependencySetup-3-2-ClownManagerAllDefaults.swift":{"syntax":"swift","highlights":[{"line":1},{"line":27},{"line":32}],"content":["@Dependency","protocol ClownManager {","    func honk()","","    func slap(victim: Person)","","    func pieToFace(pie: Pie, victim: Person)","","    var shoeSize: Double { get set }","","    \/\/ And more...","","    \/\/ Generated by the @Dependency macro","","    typealias Dependency = ClownManagerDependency","","    typealias DependencyKey = ClownManagerDependencyKey","}","","\/\/ Generated by the @Dependency macro","","protocol ClownManagerDependency: Dependencies {","    var clownManager: any ClownManager { get }","}","","struct ClownManagerDependencyKey: DependencyKey {","    static let defaultValue: any ClownManager = DefaultClownManagerValueFactory.makeDefaultValue()","}","","\/\/ Default Dependency Value Factory","","private struct DefaultClownManagerValueFactory: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}"],"type":"file","fileName":"ClownManager.swift","fileType":"swift","identifier":"DependencySetup-3-2-ClownManagerAllDefaults.swift"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyInjection#Attach-the-InjectedDependencies-Macro-to-Your-Component":{"role":"pseudoSymbol","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyInjection#Attach-the-InjectedDependencies-Macro-to-Your-Component","kind":"section","title":"Attach the InjectedDependencies Macro to Your Component","url":"\/tutorials\/globaldependencies\/dependencyinjection#Attach-the-InjectedDependencies-Macro-to-Your-Component","type":"section","abstract":[{"type":"text","text":"Once you have your dependencies set up, you’ll want to inject them into your codebase’s components. The"},{"type":"text","text":" "},{"text":"GlobalDependencies package makes it straightforward while ensuring your component’s dependencies are well","type":"text"},{"type":"text","text":" "},{"text":"managed and well understood.","type":"text"}]},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyOverride#Set-up-a-Mock-Dependency-Implementation":{"title":"Set up a Mock Dependency Implementation","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride#Set-up-a-Mock-Dependency-Implementation","url":"\/tutorials\/globaldependencies\/dependencyoverride#Set-up-a-Mock-Dependency-Implementation","role":"pseudoSymbol","kind":"section","type":"section","abstract":[{"type":"text","text":"One of the most important reasons to use dependency injection is to make your software components testable by"},{"type":"text","text":" "},{"text":"taking control of the dependencies’ side effects during testing. Any dependencies you manage through","type":"text"},{"type":"text","text":" "},{"text":"GlobalDependencies are simple to override during tests with the provided API.","type":"text"}]},"DependencySetup-4-2-GlobalDependencyExtensionExpanded.swift":{"syntax":"swift","highlights":[{"line":29},{"line":30},{"line":31},{"line":32},{"line":33}],"content":["@Dependency","protocol ClownManager {","    func honk()","","    func slap(victim: Person)","","    func pieToFace(pie: Pie, victim: Person)","","    var shoeSize: Double { get set }","","    \/\/ And more...","}","","\/\/ Default Dependency Value Factory","","private struct DefaultClownManagerValueFactory: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}","","\/\/ GlobalDependencies Integration","","extension GlobalDependencies: ClownManager.Dependency {","    \/\/ Generated by the #GlobalDependency macro","","    var clownManager: any ClownManager {","        resolveDependencyFor(key: ClownManager.DependencyKey.self)","    }","}"],"type":"file","fileName":"ClownManager.swift","fileType":"swift","identifier":"DependencySetup-4-2-GlobalDependencyExtensionExpanded.swift"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencyOverride#Build-a-GlobalDependencies-Value-With-Your-Overrides":{"role":"pseudoSymbol","type":"section","url":"\/tutorials\/globaldependencies\/dependencyoverride#Build-a-GlobalDependencies-Value-With-Your-Overrides","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencyOverride#Build-a-GlobalDependencies-Value-With-Your-Overrides","abstract":[{"text":"One of the most important reasons to use dependency injection is to make your software components testable by","type":"text"},{"type":"text","text":" "},{"text":"taking control of the dependencies’ side effects during testing. Any dependencies you manage through","type":"text"},{"type":"text","text":" "},{"type":"text","text":"GlobalDependencies are simple to override during tests with the provided API."}],"title":"Build a `GlobalDependencies` Value With Your Overrides","kind":"section"},"doc://GlobalDependencies/tutorials/GlobalDependencies/DependencySetup#Attach-the-Dependency-macro-to-the-API-protocol":{"role":"pseudoSymbol","identifier":"doc:\/\/GlobalDependencies\/tutorials\/GlobalDependencies\/DependencySetup#Attach-the-Dependency-macro-to-the-API-protocol","kind":"section","title":"Attach the @Dependency macro to the API protocol","url":"\/tutorials\/globaldependencies\/dependencysetup#Attach-the-Dependency-macro-to-the-API-protocol","type":"section","abstract":[{"type":"text","text":"This tutorial guides you through a sample set up for a global dependency using the "},{"code":"GlobalDependencies","type":"codeVoice"},{"type":"text","text":" "},{"type":"text","text":"package. You’ll set up all the parts needed for a dependency to be usable, injectable and overridable."}]},"DependencySetup-4-1-GlobalDependencyExtension.swift":{"syntax":"swift","highlights":[],"content":["@Dependency","protocol ClownManager {","    func honk()","","    func slap(victim: Person)","","    func pieToFace(pie: Pie, victim: Person)","","    var shoeSize: Double { get set }","","    \/\/ And more...","}","","\/\/ Default Dependency Value Factory","","private struct DefaultClownManagerValueFactory: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}","","\/\/ GlobalDependencies Integration","","extension GlobalDependencies: ClownManager.Dependency {","    #GlobalDependency(type: ClownManager)","}"],"type":"file","fileName":"ClownManager.swift","fileType":"swift","identifier":"DependencySetup-4-1-GlobalDependencyExtension.swift"},"doc://GlobalDependencies/tutorials/Using-GlobalDependencies/Setting-up-a-Dependency":{"title":"Setting up a Dependency","kind":"article","identifier":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Setting-up-a-Dependency","url":"\/tutorials\/using-globaldependencies\/setting-up-a-dependency","type":"topic","abstract":[],"role":"article"},"doc://GlobalDependencies/tutorials/Using-GlobalDependencies/Overriding-Dependencies":{"title":"Overriding Dependencies","kind":"article","identifier":"doc:\/\/GlobalDependencies\/tutorials\/Using-GlobalDependencies\/Overriding-Dependencies","url":"\/tutorials\/using-globaldependencies\/overriding-dependencies","type":"topic","abstract":[],"role":"article"},"DependencySetup-2-1-Extension.swift":{"syntax":"swift","highlights":[],"content":["private extension PagliacciClownManager: DefaultDependencyValueFactory {","    static func makeDefaultValue() -> any ClownManager {","        #if DEBUG","        return PagliacciClownManager(FakePagliacci())","        #else","        return PagliacciClownManager(RealPagliacci())","        #endif","    }","}"],"type":"file","fileName":"ClownManager.swift","fileType":"swift","identifier":"DependencySetup-2-1-Extension.swift"}}}